{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { checkIfisAuthorized } from \"../HelperFunctions\";\n\nfunction useAuth() {\n  const authSelector = useSelector(state => state);\n  const [state, setstate] = React.useState({\n    isAuthorized: {\n      checkingInProgress: true,\n      checkResult: \"NOT_CHECKED\"\n    }\n  });\n\n  function checkAuth() {\n    const auth = _objectSpread({}, authSelector);\n\n    if (auth.jwt !== \"\") {\n      checkIfisAuthorized(auth.jwt).then(data => {\n        const {\n          isAuthorized\n        } = JSON.parse(data);\n\n        if (isAuthorized.userEmail) {\n          // console.log(auth);\n          setstate({\n            isAuthorized: {\n              checkingInProgress: false,\n              checkResult: \"FOUND\",\n              role: auth.role,\n              jwt: auth.jwt\n            }\n          });\n        } else {\n          setstate({\n            isAuthorized: {\n              checkingInProgress: false,\n              checkResult: \"NOT_FOUND\"\n            }\n          });\n        }\n      });\n    } else {\n      setstate({\n        isAuthorized: {\n          checkingInProgress: false,\n          checkResult: \"NOT_FOUND\"\n        }\n      });\n    }\n  }\n\n  if (state.isAuthorized.checkingInProgress) {\n    checkAuth();\n  }\n\n  return state;\n}\n\nexport default useAuth;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\ovi_port_website\\app\\components\\Auth\\useAuth.js"],"names":["React","useSelector","checkIfisAuthorized","useAuth","authSelector","state","setstate","useState","isAuthorized","checkingInProgress","checkResult","checkAuth","auth","jwt","then","data","JSON","parse","userEmail","role"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,mBAAT,QAAoC,oBAApC;;AAEA,SAASC,OAAT,GAAmB;AACjB,QAAMC,YAAY,GAAGH,WAAW,CAACI,KAAK,IAAIA,KAAV,CAAhC;AACA,QAAM,CAACA,KAAD,EAAQC,QAAR,IAAoBN,KAAK,CAACO,QAAN,CAAe;AACvCC,IAAAA,YAAY,EAAE;AAAEC,MAAAA,kBAAkB,EAAE,IAAtB;AAA4BC,MAAAA,WAAW,EAAE;AAAzC;AADyB,GAAf,CAA1B;;AAIA,WAASC,SAAT,GAAqB;AACnB,UAAMC,IAAI,qBAAQR,YAAR,CAAV;;AACA,QAAIQ,IAAI,CAACC,GAAL,KAAa,EAAjB,EAAqB;AACnBX,MAAAA,mBAAmB,CAACU,IAAI,CAACC,GAAN,CAAnB,CAA8BC,IAA9B,CAAmCC,IAAI,IAAI;AACzC,cAAM;AAAEP,UAAAA;AAAF,YAAmBQ,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAzB;;AACA,YAAIP,YAAY,CAACU,SAAjB,EAA4B;AAC1B;AACAZ,UAAAA,QAAQ,CAAC;AACPE,YAAAA,YAAY,EAAE;AACZC,cAAAA,kBAAkB,EAAE,KADR;AAEZC,cAAAA,WAAW,EAAE,OAFD;AAGZS,cAAAA,IAAI,EAAEP,IAAI,CAACO,IAHC;AAIZN,cAAAA,GAAG,EAAED,IAAI,CAACC;AAJE;AADP,WAAD,CAAR;AAQD,SAVD,MAUO;AACLP,UAAAA,QAAQ,CAAC;AACPE,YAAAA,YAAY,EAAE;AACZC,cAAAA,kBAAkB,EAAE,KADR;AAEZC,cAAAA,WAAW,EAAE;AAFD;AADP,WAAD,CAAR;AAMD;AACF,OApBD;AAqBD,KAtBD,MAsBO;AACLJ,MAAAA,QAAQ,CAAC;AACPE,QAAAA,YAAY,EAAE;AAAEC,UAAAA,kBAAkB,EAAE,KAAtB;AAA6BC,UAAAA,WAAW,EAAE;AAA1C;AADP,OAAD,CAAR;AAGD;AACF;;AACD,MAAIL,KAAK,CAACG,YAAN,CAAmBC,kBAAvB,EAA2C;AACzCE,IAAAA,SAAS;AACV;;AAED,SAAON,KAAP;AACD;;AAED,eAAeF,OAAf","sourcesContent":["import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { checkIfisAuthorized } from \"../HelperFunctions\";\r\n\r\nfunction useAuth() {\r\n  const authSelector = useSelector(state => state);\r\n  const [state, setstate] = React.useState({\r\n    isAuthorized: { checkingInProgress: true, checkResult: \"NOT_CHECKED\" }\r\n  });\r\n\r\n  function checkAuth() {\r\n    const auth = { ...authSelector };\r\n    if (auth.jwt !== \"\") {\r\n      checkIfisAuthorized(auth.jwt).then(data => {\r\n        const { isAuthorized } = JSON.parse(data);\r\n        if (isAuthorized.userEmail) {\r\n          // console.log(auth);\r\n          setstate({\r\n            isAuthorized: {\r\n              checkingInProgress: false,\r\n              checkResult: \"FOUND\",\r\n              role: auth.role,\r\n              jwt: auth.jwt\r\n            }\r\n          });\r\n        } else {\r\n          setstate({\r\n            isAuthorized: {\r\n              checkingInProgress: false,\r\n              checkResult: \"NOT_FOUND\"\r\n            }\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      setstate({\r\n        isAuthorized: { checkingInProgress: false, checkResult: \"NOT_FOUND\" }\r\n      });\r\n    }\r\n  }\r\n  if (state.isAuthorized.checkingInProgress) {\r\n    checkAuth();\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nexport default useAuth;\r\n"]},"metadata":{},"sourceType":"module"}